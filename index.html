<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Django mturk minimalistic by raffienficiaud</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Django mturk minimalistic</h1>
        <h2>A minimalistic Django app for Mechanical Turk External Question</h2>
        <a href="https://github.com/raffienficiaud/django_mturk_minimalistic" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="django-amazon-mechanical-turk-external-question-minimalistic-example" class="anchor" href="#django-amazon-mechanical-turk-external-question-minimalistic-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Django Amazon Mechanical Turk External Question minimalistic example</h1>

<p>This is a super small project on how to use Django to show and manage external question for the Amazon Mechanical Turk. </p>

<h2>
<a id="why-external-questions" class="anchor" href="#why-external-questions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Why external questions?</h2>

<p>Amazon Mechanical Turk (AMT) comes with a lot of possibilities. However sometimes you just need to do something really hacky on the Javascript side (interactive image segmentation), and the provided built-in functionalities are not addressing your needs. Hopefully, AMT provides the External Question possibility: the question posted on the AMT market is just a redirection to a particular URL you own, with some metadata. </p>

<p>In this setup, you can show whatever you want to the end user, interact with him much better. The only limit are your creativity, your skills and your browser.</p>

<h2>
<a id="why-django" class="anchor" href="#why-django" aria-hidden="true"><span class="octicon octicon-link"></span></a>Why Django?</h2>

<p>Django is a super Framework in Python for doing web applications. It contains a database backend, a nice template for creating the HMTL files shown to the user, and a nice logic for transforming the requested URLs (the one from the AMT) into functions.</p>

<p>In this project, we simply use the database backend to store the information that will be shown to the user. We also store in the database how this information is linked to the AMT (the question instances or "hits", the results, etc).</p>

<h2>
<a id="dependencies" class="anchor" href="#dependencies" aria-hidden="true"><span class="octicon octicon-link"></span></a>Dependencies</h2>

<p>The only dependencies are</p>

<ul>
<li>django</li>
<li>boto</li>
</ul>

<h2>
<a id="what-does-this-application" class="anchor" href="#what-does-this-application" aria-hidden="true"><span class="octicon octicon-link"></span></a>What does this application?</h2>

<ul>
<li>The "app" starts by parsing a directory and retrieves all the images. These images are added into the database as primary source of information for creating the questions to the Amazon workers. </li>
<li>Then, the "HITS" are created. The HITS are external questions showing a specific URL on our app server. This URL is constructed in such a way that the image from which the hit is created is shown to the user. The HITS are also stored into the database to better track what is going on on the Amazon side.</li>
<li>Finally, the results are taken back from Amazon. The content of the result is also stored into the database and bound to the HIT and the image on which it operates. </li>
</ul>

<h2>
<a id="how-to-use-the-app" class="anchor" href="#how-to-use-the-app" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to use the app?</h2>

<p>All these 3 commands are available from the command line, basically by doing</p>

<pre><code>python manage.py command [options]
</code></pre>

<p>These commands are, respecitively to their description above:</p>

<ul>
<li>
<code>add_picture_folder</code>: a folder containing the pictures should be specified. A picture is not added twice in the database.</li>
<li>
<code>create_hits</code>: the HITS are created on the Amazon side. For this to run properly, a proper credential should be set in the function <code>get_connection</code> in the file <code>boto1\management\commands\create_hits.py</code>. The base URL of the server (such as <code>https://my.app.domain/my/app</code>) should be provided to the command</li>
<li>
<code>retrieve_results</code>: the results are retrieved from Amazon. Each new result is added in the database. </li>
</ul>

<h2>
<a id="any-other-configuration" class="anchor" href="#any-other-configuration" aria-hidden="true"><span class="octicon octicon-link"></span></a>Any other configuration?</h2>

<p>The application is functional in the code base. A couple of changes should be done in order to be able to deploy the app in a production server. Note that even for the sandbox, the HTTPS protocol should be used, which is hard to handle from Django directly.</p>

<p>The real deployment should be done behind a real http server, and using HTTPS protocol. We refer to the numerous documentation for that, which depends on your system and the front server. Also the static and media folders should be set properly, and the <code>Debug</code> value in the <code>settings.py</code> should be set to <code>False</code>.
In the <code>settings.py</code> file also is set whether the app should be using the sandbox of the Amazon Mechanical Turk or the production server. The default in the code is the use of the sandbox.</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/raffienficiaud/django_mturk_minimalistic/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/raffienficiaud/django_mturk_minimalistic/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/raffienficiaud/django_mturk_minimalistic"></a> is maintained by <a href="https://github.com/raffienficiaud">raffienficiaud</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
